{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\kang\\\\Luna\\\\GWproject\\\\fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\kang\\\\Luna\\\\GWproject\\\\fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\kang\\\\Luna\\\\GWproject\\\\fe\\\\src\\\\webapp\\\\pce\\\\pages\\\\PlaceList.js\";\n\nimport React, { useState, useEffect, useCallback, Fragment } from \"react\";\nimport styles from \"../styles/PlaceList.module.scss\";\nimport { useCustomState } from \"state/state\";\nimport { useParams, useRouteMatch } from \"react-router-dom\";\nimport { animateScroll as scroll } from \"react-scroll\";\nimport { BlogCard, BlogPagination, BlogCategories, BlogFeatured, BlogSearch } from \"./../Blog/components\";\nimport { Header } from \"components/widgets\";\nexport default (function (_ref) {\n  var _ref$sidebar = _ref.sidebar,\n      sidebar = _ref$sidebar === void 0 ? \"left\" : _ref$sidebar,\n      _ref$layout = _ref.layout,\n      layout = _ref$layout === void 0 ? \"grid\" : _ref$layout,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? \"title\" : _ref$title;\n  var state = useCustomState()[0];\n\n  var _useParams = useParams(),\n      category = _useParams.category,\n      author = _useParams.author,\n      posting_date = _useParams.posting_date,\n      query = _useParams.query;\n\n  var _useRouteMatch = useRouteMatch(),\n      url = _useRouteMatch.url;\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentPage = _useState2[0],\n      setCurrentPage = _useState2[1];\n\n  var postsPerPage = useState(6)[0];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      postsArray = _useState4[0],\n      setPostsArray = _useState4[1];\n\n  var _useState5 = useState(title),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pageTitle = _useState6[0],\n      setPageTitle = _useState6[1];\n\n  var filterPosts = useCallback(function () {\n    var posts = _toConsumableArray(state.data.posts);\n\n    if (category) {\n      posts = state.data.posts.filter(function (post) {\n        return category === post.category_id.toString();\n      });\n      setPageTitle(\"Category: \" + state.data.categories.filter(function (cat) {\n        return cat.id === category;\n      })[0].title);\n    } else if (author) {\n      posts = state.data.posts.filter(function (post) {\n        return author === post.user_id.toString();\n      });\n      setPageTitle(\"Author: \" + state.data.users.filter(function (user) {\n        return user.id.toString() === author;\n      })[0].name);\n    } else if (posting_date) {\n      posts = state.data.posts.filter(function (post) {\n        return posting_date === post.posting_date;\n      });\n      setPageTitle(\"Date: \" + posting_date);\n    } else if (query) {\n      posts = state.data.posts.filter(function (post) {\n        return post.title.includes(query);\n      });\n      setPageTitle(\"Search for: \" + query);\n    } else {\n      setPageTitle(title);\n    }\n\n    return posts;\n  }, [author, category, posting_date, query, state.data.categories, state.data.posts, state.data.users, title]);\n  useEffect(function () {\n    setPostsArray(filterPosts().map(function (post, index) {\n      return /*#__PURE__*/React.createElement(BlogCard, {\n        key: index,\n        layout: layout,\n        post: post,\n        author: state.data.users.filter(function (user) {\n          return user.id.toString() === post.user_id;\n        })[0],\n        category: state.data.categories.filter(function (cat) {\n          return cat.id === post.category_id.toString();\n        })[0].title,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }\n      });\n    }));\n    setCurrentPage(1);\n  }, [layout, category, author, query, posting_date, url, state.data.users, state.data.categories, filterPosts]);\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    img: state.data.header_bgs.blog,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, pageTitle), /*#__PURE__*/React.createElement(\"section\", {\n    className: [styles.wrapper, sidebar === \"left\" ? styles.with_sidebar + \" \" + styles.left : sidebar === \"right\" ? styles.with_sidebar + \" \" + styles.right : null].join(\" \"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"aside\", {\n    className: styles.sidebar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BlogSearch, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(BlogCategories, {\n    data: state.data.categories,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(BlogFeatured, {\n    data: state.data.posts,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"article\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: layout === \"grid\" ? styles.grid : layout === \"list\" ? styles.list : null,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, postsArray.slice((currentPage - 1) * postsPerPage, currentPage * postsPerPage)), /*#__PURE__*/React.createElement(BlogPagination, {\n    amount: Math.ceil(postsArray.length / postsPerPage),\n    current: currentPage,\n    next: function next() {\n      setCurrentPage(function (c) {\n        return c + 1;\n      });\n      scroll.scrollToTop();\n    },\n    prev: function prev() {\n      setCurrentPage(function (c) {\n        return c - 1;\n      });\n      scroll.scrollToTop();\n    },\n    goto: function goto(id) {\n      setCurrentPage(id);\n      scroll.scrollToTop();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }))));\n});","map":{"version":3,"sources":["C:/Users/kang/Luna/GWproject/fe/src/webapp/pce/pages/PlaceList.js"],"names":["React","useState","useEffect","useCallback","Fragment","styles","useCustomState","useParams","useRouteMatch","animateScroll","scroll","BlogCard","BlogPagination","BlogCategories","BlogFeatured","BlogSearch","Header","sidebar","layout","title","state","category","author","posting_date","query","url","currentPage","setCurrentPage","postsPerPage","postsArray","setPostsArray","pageTitle","setPageTitle","filterPosts","posts","data","filter","post","category_id","toString","categories","cat","id","user_id","users","user","name","includes","map","index","header_bgs","blog","wrapper","with_sidebar","left","right","join","grid","list","slice","Math","ceil","length","c","scrollToTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, Fragment } from \"react\";\nimport styles from \"../styles/PlaceList.module.scss\";\nimport { useCustomState } from \"state/state\";\nimport { useParams, useRouteMatch } from \"react-router-dom\";\nimport { animateScroll as scroll } from \"react-scroll\";\n\nimport {\n  BlogCard,\n  BlogPagination,\n  BlogCategories,\n  BlogFeatured,\n  BlogSearch,\n} from \"./../Blog/components\";\n\nimport { Header } from \"components/widgets\";\n\nexport default ({ sidebar = \"left\", layout = \"grid\", title = \"title\" }) => {\n  const state = useCustomState()[0];\n  const { category, author, posting_date, query } = useParams();\n  const { url } = useRouteMatch();\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const postsPerPage = useState(6)[0];\n  const [postsArray, setPostsArray] = useState([]);\n  const [pageTitle, setPageTitle] = useState(title);\n\n  const filterPosts = useCallback(() => {\n    let posts = [...state.data.posts];\n\n    if (category) {\n      posts = state.data.posts.filter(\n        (post) => category === post.category_id.toString()\n      );\n      setPageTitle(\n        \"Category: \" +\n          state.data.categories.filter((cat) => cat.id === category)[0].title\n      );\n    } else if (author) {\n      posts = state.data.posts.filter(\n        (post) => author === post.user_id.toString()\n      );\n      setPageTitle(\n        \"Author: \" +\n          state.data.users.filter((user) => user.id.toString() === author)[0]\n            .name\n      );\n    } else if (posting_date) {\n      posts = state.data.posts.filter(\n        (post) => posting_date === post.posting_date\n      );\n      setPageTitle(\"Date: \" + posting_date);\n    } else if (query) {\n      posts = state.data.posts.filter((post) => post.title.includes(query));\n      setPageTitle(\"Search for: \" + query);\n    } else {\n      setPageTitle(title);\n    }\n\n    return posts;\n  }, [\n    author,\n    category,\n    posting_date,\n    query,\n    state.data.categories,\n    state.data.posts,\n    state.data.users,\n    title,\n  ]);\n\n  useEffect(() => {\n    setPostsArray(\n      filterPosts().map((post, index) => {\n        return (\n          <BlogCard\n            key={index}\n            layout={layout}\n            post={post}\n            author={\n              state.data.users.filter(\n                (user) => user.id.toString() === post.user_id\n              )[0]\n            }\n            category={\n              state.data.categories.filter(\n                (cat) => cat.id === post.category_id.toString()\n              )[0].title\n            }\n          />\n        );\n      })\n    );\n    setCurrentPage(1);\n  }, [\n    layout,\n    category,\n    author,\n    query,\n    posting_date,\n    url,\n    state.data.users,\n    state.data.categories,\n    filterPosts,\n  ]);\n\n  return (\n    <Fragment>\n      <Header img={state.data.header_bgs.blog}>{pageTitle}</Header>\n      <section\n        className={[\n          styles.wrapper,\n          sidebar === \"left\"\n            ? styles.with_sidebar + \" \" + styles.left\n            : sidebar === \"right\"\n            ? styles.with_sidebar + \" \" + styles.right\n            : null,\n        ].join(\" \")}\n      >\n        <aside className={styles.sidebar}>\n          <BlogSearch />\n          <BlogCategories data={state.data.categories} />\n          <BlogFeatured data={state.data.posts} />\n        </aside>\n\n        <article>\n          <div\n            className={\n              layout === \"grid\"\n                ? styles.grid\n                : layout === \"list\"\n                ? styles.list\n                : null\n            }\n          >\n            {postsArray.slice(\n              (currentPage - 1) * postsPerPage,\n              currentPage * postsPerPage\n            )}\n          </div>\n\n          <BlogPagination\n            amount={Math.ceil(postsArray.length / postsPerPage)}\n            current={currentPage}\n            next={() => {\n              setCurrentPage((c) => c + 1);\n              scroll.scrollToTop();\n            }}\n            prev={() => {\n              setCurrentPage((c) => c - 1);\n              scroll.scrollToTop();\n            }}\n            goto={(id) => {\n              setCurrentPage(id);\n              scroll.scrollToTop();\n            }}\n          />\n        </article>\n      </section>\n    </Fragment>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}