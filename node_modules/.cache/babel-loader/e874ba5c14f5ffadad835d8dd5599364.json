{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\kang\\\\Luna\\\\GWproject\\\\fe\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\kang\\\\Luna\\\\GWproject\\\\fe\\\\src\\\\components\\\\ui\\\\RequestForm\\\\RequestForm.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport emailjs from \"emailjs-com\";\nimport styles from \"./RequestForm.module.scss\";\nimport { CardButton, Backdrop } from \"../../ui\";\nimport { Spinner } from \"../../elements\";\nimport { useCustomState } from \"../../../state/state\";\nexport default (function (_ref) {\n  var style = _ref.style;\n\n  var _useCustomState = useCustomState(),\n      _useCustomState2 = _slicedToArray(_useCustomState, 2),\n      state = _useCustomState2[0],\n      actions = _useCustomState2[1];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      sending = _useState2[0],\n      setSending = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      status = _useState4[0],\n      setStatus = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      email = _useState8[0],\n      setEmail = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      request = _useState10[0],\n      setRequest = _useState10[1];\n\n  useEffect(function () {\n    setRequest(state.request.text);\n  }, [state.request.text]);\n  var templateParams = {\n    email: email,\n    request: request\n  };\n\n  var validateEmail = function validateEmail(email) {\n    var re = /\\S+@\\S+\\.\\S+/;\n    return re.test(email);\n  };\n\n  var onSubmit = function onSubmit() {\n    if (!validateEmail(email)) {\n      setStatus(\"Incorrect email address\");\n      setError(true);\n      return;\n    }\n\n    if (request === \"\") {\n      setStatus(\"Please enter your request\");\n      setError(true);\n      return;\n    }\n\n    setSending(true);\n    emailjs.send(\"yandex\", \"request\", templateParams, \"user_uF8hjeTp0VsUn0ZMJGpee\").then(function (response) {\n      setSending(false);\n      setError(false);\n      setStatus(\"Your request has been sent!\");\n    }, function (err) {\n      setSending(false);\n      setError(true);\n      setStatus(\"Sorry. There is an error: \" + err.text);\n    });\n    resetForm();\n  };\n\n  var resetForm = function resetForm() {\n    setEmail(\"\");\n    setRequest(\"\");\n  };\n\n  var loading = sending && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: [styles.wrapper, state.request.modal && styles.show].join(\" \"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.modal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    onClick: function onClick() {\n      return actions.toogleRequest();\n    },\n    className: \"las la-times\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    style: style,\n    className: styles.form,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, loading, /*#__PURE__*/React.createElement(CardButton, {\n    click: onSubmit,\n    btn_after: \"\\uF107\",\n    btn_text: \"Send message\",\n    btn_type: \"solid-color-tb\",\n    btn_hoverType: \"solid-gray-tb\",\n    btn_align: \"stretch\",\n    padding: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.contact_form,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: [styles.status, error && styles.error].join(\" \"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, status), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, \"Send new request:\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    value: request,\n    onChange: function onChange(e) {\n      return setRequest(e.target.value);\n    },\n    rows: \"10\",\n    placeholder: \"Enter your request\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    type: \"email\",\n    placeholder: \"Email address *\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }\n  }))))), /*#__PURE__*/React.createElement(Backdrop, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }));\n});","map":{"version":3,"sources":["C:/Users/kang/Luna/GWproject/fe/src/components/ui/RequestForm/RequestForm.js"],"names":["React","useState","useEffect","emailjs","styles","CardButton","Backdrop","Spinner","useCustomState","style","state","actions","sending","setSending","status","setStatus","error","setError","email","setEmail","request","setRequest","text","templateParams","validateEmail","re","test","onSubmit","send","then","response","err","resetForm","loading","wrapper","modal","show","join","toogleRequest","form","contact_form","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport emailjs from \"emailjs-com\";\nimport styles from \"./RequestForm.module.scss\";\nimport { CardButton, Backdrop } from \"../../ui\";\nimport { Spinner } from \"../../elements\";\nimport { useCustomState } from \"../../../state/state\";\n\nexport default ({ style }) => {\n  const [state, actions] = useCustomState();\n\n  const [sending, setSending] = useState(false);\n  const [status, setStatus] = useState(\"\");\n  const [error, setError] = useState(false);\n\n  const [email, setEmail] = useState(\"\");\n  const [request, setRequest] = useState(\"\");\n\n  useEffect(() => {\n    setRequest(state.request.text);\n  }, [state.request.text]);\n\n  const templateParams = {\n    email: email,\n    request: request,\n  };\n\n  const validateEmail = (email) => {\n    var re = /\\S+@\\S+\\.\\S+/;\n    return re.test(email);\n  };\n\n  const onSubmit = () => {\n    if (!validateEmail(email)) {\n      setStatus(\"Incorrect email address\");\n      setError(true);\n      return;\n    }\n\n    if (request === \"\") {\n      setStatus(\"Please enter your request\");\n      setError(true);\n      return;\n    }\n\n    setSending(true);\n    emailjs\n      .send(\"yandex\", \"request\", templateParams, \"user_uF8hjeTp0VsUn0ZMJGpee\")\n      .then(\n        (response) => {\n          setSending(false);\n          setError(false);\n          setStatus(\"Your request has been sent!\");\n        },\n        (err) => {\n          setSending(false);\n          setError(true);\n          setStatus(\"Sorry. There is an error: \" + err.text);\n        }\n      );\n    resetForm();\n  };\n\n  const resetForm = () => {\n    setEmail(\"\");\n    setRequest(\"\");\n  };\n\n  const loading = sending && (\n    <div className={styles.loading}>\n      <Spinner />\n    </div>\n  );\n\n  return (\n    <div\n      className={[styles.wrapper, state.request.modal && styles.show].join(\" \")}\n    >\n      <div className={styles.modal}>\n        <i onClick={() => actions.toogleRequest()} className=\"las la-times\" />\n        <form style={style} className={styles.form}>\n          {loading}\n          <CardButton\n            click={onSubmit}\n            btn_after=\"&#xf107;\"\n            btn_text=\"Send message\"\n            btn_type=\"solid-color-tb\"\n            btn_hoverType=\"solid-gray-tb\"\n            btn_align=\"stretch\"\n            padding\n          >\n            <div className={styles.contact_form}>\n              <span\n                className={[styles.status, error && styles.error].join(\" \")}\n              >\n                {status}\n              </span>\n              <h4>Send new request:</h4>\n              <textarea\n                value={request}\n                onChange={(e) => setRequest(e.target.value)}\n                rows=\"10\"\n                placeholder=\"Enter your request\"\n              />\n              <input\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                type=\"email\"\n                placeholder=\"Email address *\"\n              />\n            </div>\n          </CardButton>\n        </form>\n      </div>\n      <Backdrop />\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}